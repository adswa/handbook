
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Populate a dataset &#8212; The DataLad Handbook</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="canonical" href="http://handbook.datalad.org/basics/101-102-populate.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Modify content" href="101-103-modify.html" />
    <link rel="prev" title="Create a dataset" href="101-101-create.html" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    div.body {
      min-width: initial;
      max-width: initial;
    }
  </style>

  
  <link rel="canonical" href="https://handbook.datalad.org/basics/101-102-populate/"/>
  <meta property="og:url" content="https://handbook.datalad.org/basics/101-102-populate">
  

  <link rel="icon" type="image/png" href="https://media.readthedocs.org/images/favicon.png">

  <meta name="twitter:card" content="summary">
  <meta property="twitter:image" content="https://handbook.datalad.org/_static/social-card.jpg">
  <meta property="og:image" content="https://handbook.datalad.org/_static/social-card.jpg">
  <meta property="og:title" content="Populate a dataset &#8212; The DataLad Handbook">
  <meta property="og:type" content="article">
  
  <meta property="og:description" content="">


  </head><body>
  <script type="text/javascript">

  $(window).scroll(function () {
    var s = $(window).scrollTop(),
          d = $(document).height(),
          c = $(window).height();
          scrollPercent = (s / (d-c)) * 100;
          var position = scrollPercent;

     $("#progressbar").attr('value', position);
  });
  </script>

  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.png" title="The DataLad Handbook"/>
  </a>
</p>

<p style="margin-left:auto; margin-right: auto;"><iframe src="https://ghbtns.com/github-btn.html?repo=book&user=datalad-handbook&type=star&count=true&size=large" allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe></p>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<style>
.algolia-autocomplete{
  width: 100%;
  height: 1.5em
}
.algolia-autocomplete a{
  border-bottom: none !important;
}
#doc_search{
  width: 100%;
  height: 100%;
}
</style>

<progress id="progressbar" value="0" max="100"></progress><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="101-101-create.html" title="previous chapter">Create a dataset</a></li>
      <li>Next: <a href="101-103-modify.html" title="next chapter">Modify content</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><!-- Alabaster (krTheme++) Hacks -->
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            <div style="display:block;position:relative; margin-bottom: 1em;">
              <div style="display:block;width:100%;padding-top:12.5%;"></div>
              <div class="rpad" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div>
            </div>
            
  <div class="section" id="populate-a-dataset">
<span id="populate"></span><h1>Populate a dataset<a class="headerlink" href="#populate-a-dataset" title="Permalink to this headline">¶</a></h1>
<p>The first lecture in DataLad-101 referenced some useful literature.
Even if we end up not reading those books at all, let’s just download
them and put them into our dataset. You never know, right?
Let’s first create a directory to save books for additional reading in.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> mkdir books
</pre></div>
</div>
<p>Let’s take a look at the current directory structure with the tree command<a class="footnote-reference brackets" href="#f1" id="id1">1</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> tree
<span class="go">.</span>
<span class="go">└── books</span>

<span class="go">1 directory, 0 files</span>
</pre></div>
</div>
<p>Arguably, not the most exciting thing to see. So let’s put some PDFs inside.
Below is a short list of optional readings. We decide to download them (they
are all free, in total about 15 MB), and save them in <code class="docutils literal notranslate"><span class="pre">DataLad-101/books</span></code>.</p>
<ul class="simple">
<li><p>Additional reading about the command line: <a class="reference external" href="https://sourceforge.net/projects/linuxcommand/files/TLCL/19.01/TLCL-19.01.pdf/download">The Linux Command Line</a></p></li>
<li><p>An intro to Python: <a class="reference external" href="https://www.gitbook.com/download/pdf/book/swaroopch/byte-of-python">A byte of Python</a></p></li>
</ul>
<p>You can either visit the links and save them in <code class="docutils literal notranslate"><span class="pre">books/</span></code>,
or run the following commands<a class="footnote-reference brackets" href="#f2" id="id2">2</a> to download the books right from the terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> books
<span class="gp">$</span> wget https://sourceforge.net/projects/linuxcommand/files/TLCL/19.01/TLCL-19.01.pdf/download -O TLCL.pdf
<span class="gp">$</span> wget https://www.gitbook.com/download/pdf/book/swaroopch/byte-of-python -O byte-of-python.pdf
<span class="gp">#</span> get back into the root of the dataset
<span class="gp">$</span> <span class="nb">cd</span> ../
<span class="go">2019-11-12 15:04:59 URL:https://netix.dl.sourceforge.net/project/linuxcommand/TLCL/19.01/TLCL-19.01.pdf [2120211/2120211] -&gt; &quot;TLCL.pdf&quot; [1]</span>
<span class="go">2019-11-12 15:05:01 URL:https://legacy.gitbook.com/download/pdf/book/swaroopch/byte-of-python [4407669] -&gt; &quot;byte-of-python.pdf&quot; [1]</span>
</pre></div>
</div>
<p>Let’s see what happened. First of all, in the root of <code class="docutils literal notranslate"><span class="pre">DataLad-101</span></code>, show the directory
structure with tree:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> tree
<span class="go">.</span>
<span class="go">└── books</span>
<span class="go">    ├── byte-of-python.pdf</span>
<span class="go">    └── TLCL.pdf</span>

<span class="go">1 directory, 2 files</span>
</pre></div>
</div>
<p id="index-0">Now what does DataLad do with this new content? One command you will use very
often is <strong class="command">datalad status</strong> (<em class="manpage"><a class="manpage reference external" href="http://docs.datalad.org/generated/man/datalad-status.html">datalad-status</a></em> manual).
It reports on the state of dataset content, and
regular status reports should become a habit in the wake of <code class="docutils literal notranslate"><span class="pre">DataLad-101</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> datalad status
<span class="go">untracked: books (directory)</span>
</pre></div>
</div>
<p id="index-1">Interesting, the <code class="docutils literal notranslate"><span class="pre">books/</span></code> directory is “untracked”. Remember how content
<em>can</em> be tracked <em>if a user wants to</em>?
Untracked means that DataLad does not know about this directory or its content,
because we have not instructed DataLad to actually track it. This means, DataLad
does not keep the downloaded books in its history yet. Let’s change this by
saving the files to the dataset’s history with the <strong class="command">datalad save</strong> command
(<em class="manpage"><a class="manpage reference external" href="http://docs.datalad.org/generated/man/datalad-save.html">datalad-save</a></em> manual).</p>
<p>This time, its your turn to specify a helpful <a class="reference internal" href="../glossary.html#term-commit-message"><span class="xref std std-term">commit message</span></a>
with the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> datalad save -m <span class="s2">&quot;add books on Python and Unix to read later&quot;</span>
<span class="go">add(ok): books/TLCL.pdf (file)</span>
<span class="go">add(ok): books/byte-of-python.pdf (file)</span>
<span class="go">save(ok): . (dataset)</span>
<span class="go">action summary:</span>
<span class="go">  add (ok: 2)</span>
<span class="go">  save (ok: 1)</span>
</pre></div>
</div>
<div class="toggle findoutmore docutils container">
<div class="header docutils container">
<p><strong>Find out more: </strong>“Oh no! I forgot the -m option!”</p>
</div>
<p>If you forget to specify a commit message with <code class="docutils literal notranslate"><span class="pre">-m</span></code>, DataLad will write
<code class="docutils literal notranslate"><span class="pre">[DATALAD]</span> <span class="pre">Recorded</span> <span class="pre">changes</span></code> as a commit message into your history.
This is not particularly informative.
You can change the <em>last</em> commit message with the Git command
<strong class="command">git commit --amend</strong>. This will open up your default editor
and you can edit
the commit message. Careful – the default editor might be <a class="reference internal" href="../glossary.html#term-vim"><span class="xref std std-term">vim</span></a>!</p>
</div>
<p>As already noted, any files you <code class="docutils literal notranslate"><span class="pre">save</span></code> in this dataset, and all modifications
to these files that you <code class="docutils literal notranslate"><span class="pre">save</span></code>, are tracked in this history.
Importantly, this file tracking works
regardless of the size of the files – a DataLad dataset could be
your private music or movie collection with single files being many GB in size.
This is one aspect that distinguishes DataLad from many other
version control tools, among them Git.
Large content is tracked in an <em>annex</em> that is automatically
created and handled by DataLad. Whether text files or larger files change,
all of these changes can be written to your DataLad datasets history.</p>
<p>Let’s see how the saved content shows up in the history of the dataset with <strong class="command">git log</strong>.
<code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">1</span></code> specifies that we want to take a look at the most recent commit.
In order to get a bit more details, we add the <code class="docutils literal notranslate"><span class="pre">-p</span></code> flag (if in a pager, leave the git log
by typing <code class="docutils literal notranslate"><span class="pre">q</span></code>, navigate with up and down arrow keys):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> git log -p -n <span class="m">1</span>
<span class="go">commit 9a6fb63c12113788948a72bc0b44c1aac4e69466</span>
<span class="hll"><span class="go">Author: Elena Piscopia &lt;elena@example.net&gt;</span>
</span><span class="hll"><span class="go">Date:   Tue Nov 12 15:05:02 2019 +0100</span>
</span>
<span class="hll"><span class="go">    add books on Python and Unix to read later</span>
</span>
<span class="hll"><span class="go">diff --git a/books/TLCL.pdf b/books/TLCL.pdf</span>
</span><span class="go">new file mode 120000</span>
<span class="go">index 0000000..4c84b61</span>
<span class="go">--- /dev/null</span>
<span class="hll"><span class="go">+++ b/books/TLCL.pdf</span>
</span><span class="go">@@ -0,0 +1 @@</span>
<span class="go">+../.git/annex/objects/jf/3M/MD5E-s2120211--06d1efcb05bb2c55cd039dab3fb28455.pdf/MD5E-s2120211--06d1efcb05bb2c55cd039dab3fb28455.pdf</span>
<span class="go">\ No newline at end of file</span>
<span class="hll"><span class="go">diff --git a/books/byte-of-python.pdf b/books/byte-of-python.pdf</span>
</span><span class="go">new file mode 120000</span>
<span class="go">index 0000000..9a812a0</span>
<span class="go">--- /dev/null</span>
<span class="hll"><span class="go">+++ b/books/byte-of-python.pdf</span>
</span></pre></div>
</div>
<p>Now this might look a bit cryptic (and honestly, tig<a class="footnote-reference brackets" href="#f3" id="id3">3</a> makes it look prettier).
But this tells us the date and time in which a particular author added two PDFs to
the directory <code class="docutils literal notranslate"><span class="pre">books/</span></code>, and thanks to that commit message we have a nice
human-readable summary of that action.</p>
<div class="toggle findoutmore docutils container">
<div class="header docutils container">
<p><strong>Find out more: </strong>DOs and DON’Ts for commit messages</p>
</div>
<p><strong>DOs</strong></p>
<ul class="simple">
<li><p>Write a <em>title line</em> with 72 characters or less (as we did so far)</p></li>
<li><p>it should be in imperative voice, e.g., “Add notes from lecture 2”</p></li>
<li><p>Often, a title line is not enough to express your changes and reasoning behind it. In this case, add a body to your commit message by hitting enter twice (before closing the quotation marks), and continue writing a brief summary of the changes after a blank line. This summary should explain “what” has been done and “why”, but not “how”. Close the quotation marks, and hit enter to save the change with your message.</p></li>
<li><p>here you can find more guidelines: <a class="reference external" href="https://gist.github.com/robertpainsi/b632364184e70900af4ab688decf6f53">https://gist.github.com/robertpainsi/b632364184e70900af4ab688decf6f53</a></p></li>
</ul>
<p><strong>DON’Ts</strong></p>
<ul class="simple">
<li><p>passive voice is hard to read afterwards</p></li>
<li><p>extensive formatting (hashes, asterisks, quotes, …) will most likely make your shell complain</p></li>
<li><p>it should be obvious: do not say nasty things about other people</p></li>
</ul>
</div>
<div class="admonition gitusernote">
<p class="admonition-title">Note for Git users</p>
<p>Just as in Git, new files are not tracked from their creation on, but only when
explicitly added to Git (in Git terms with an initial <strong class="command">git add</strong>). But different
from the common Git workflow, DataLad skips the staging area. A <strong class="command">datalad save</strong>
combines a <strong class="command">git add</strong> and a <strong class="command">git commit</strong>, and therefore, the commit message
is specified with <strong class="command">datalad save</strong>.</p>
</div>
<p>Cool, so now you have added some files to your dataset history. But what is a bit
inconvenient is that both books were saved <em>together</em>. You begin to wonder: “A Python
book and a Unix book do not have that much in common. I probably should not save them
in the same commit. And … what happens if I have files I do not want to track?
<strong class="command">datalad save -m &quot;some commit message&quot;</strong> would save all of what is currently
untracked or modified in the dataset into the history!”</p>
<p>Regarding your first remark, you’re absolutely right with that!
It is good practice to save only those changes
together that belong together. We do not want to squish completely unrelated changes
into the same spot of our history, because it would get very nasty should we want to
revert <em>some</em> of the changes without affecting others in this commit.</p>
<p>Luckily, we can point <strong class="command">datalad save</strong> to exactly the changes we want it to record.
Let’s try this by adding yet another book, a good reference work about git,
<a class="reference external" href="https://git-scm.com/book/en/v2">Pro Git</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> books
<span class="gp">$</span> wget https://github.com/progit/progit2/releases/download/2.1.154/progit.pdf
<span class="gp">$</span> <span class="nb">cd</span> ../
<span class="go">2019-11-12 15:05:04 URL:https://github-production-release-asset-2e65be.s3.amazonaws.com/15400220/57552a00-9a49-11e9-9144-d9607ed4c2db?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20191112%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20191112T140502Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=cf7bb2994cf463e68b19817d3317497f58f1b2e62d9c5b3abd1a788b4d482358&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;response-content-disposition=attachment%3B%20filename%3Dprogit.pdf&amp;response-content-type=application%2Foctet-stream [12465653/12465653] -&gt; &quot;progit.pdf&quot; [1]</span>
</pre></div>
</div>
<p><strong class="command">datalad status</strong> shows that there is a new untracked file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> datalad status
<span class="go">untracked: books/progit.pdf (file)</span>
</pre></div>
</div>
<p>Let’s <strong class="command">datalad save</strong> precisely this file by specifying its path after the commit message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> datalad save -m <span class="s2">&quot;add reference book about git&quot;</span> books/progit.pdf
<span class="go">add(ok): books/progit.pdf (file)</span>
<span class="go">save(ok): . (dataset)</span>
<span class="go">action summary:</span>
<span class="go">  add (ok: 1)</span>
<span class="go">  save (ok: 1)</span>
</pre></div>
</div>
<div class="toggle findoutmore docutils container">
<div class="header docutils container">
<p><strong>Find out more: </strong>Some more on save</p>
</div>
<p>Regarding your second remark, you’re right that a <strong class="command">datalad save</strong> without a
path specification would write all of the currently untracked files or modifications
to the history.
There are some ways to mitigate this: A <strong class="command">datalad save -m &quot;concise message&quot; --updated</strong>
(or the shorter form of <code class="docutils literal notranslate"><span class="pre">--updated</span></code>, <code class="docutils literal notranslate"><span class="pre">-u</span></code>) will only write <em>modifications</em> to the
history, not untracked files. Later, we will also see <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> files that let
you hide content from version control.
However, it is good practice to safely store away modifications or new content.
This both improves your dataset and workflow, and will be a requirement for the execution
of certain commands.</p>
</div>
<p>A <strong class="command">datalad status</strong> should now be empty, and our dataset’s history should look like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> lets make the output a bit more concise with the --oneline option
<span class="gp">$</span> git log --oneline
<span class="go">dac2fa7 add reference book about git</span>
<span class="go">9a6fb63 add books on Python and Unix to read later</span>
<span class="go">1a45fd4 Instruct annex to add text files to Git</span>
<span class="go">e85b950 [DATALAD] new dataset</span>
</pre></div>
</div>
<p>Well done! Your <code class="docutils literal notranslate"><span class="pre">DataLad-101</span></code> dataset and its history are slowly growing.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="f1"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">tree</span></code> is a Unix command to list file system content. If it is not yet installed,
you can get it with your native package manager (e.g.,
<code class="docutils literal notranslate"><span class="pre">apt</span></code> or <code class="docutils literal notranslate"><span class="pre">brew</span></code>). For example, if you use OSX, <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">tree</span></code>
will get you this tool.</p>
</dd>
<dt class="label" id="f2"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">wget</span></code> is a Unix command for non-interactively downloading files from the
web. If it is not yet installed, you can get it with your native package manager (e.g.,
<code class="docutils literal notranslate"><span class="pre">apt</span></code> or <code class="docutils literal notranslate"><span class="pre">brew</span></code>). For example, if you use OSX, <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">wget</span></code>
will get you this tool.</p>
</dd>
<dt class="label" id="f3"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p>See <a class="reference internal" href="../glossary.html#term-tig"><span class="xref std std-term">tig</span></a>. Once installed, exchange any git log command you
see here with the single word <code class="docutils literal notranslate"><span class="pre">tig</span></code>.</p>
</dd>
</dl>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="101-101-create.html" title="Previous document">Create a dataset</a>
        </li>
        <li>
          <a href="101-103-modify.html" title="Next document">Modify content</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>